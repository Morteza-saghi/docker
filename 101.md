# Docker Learning Guide


## Introduction to Docker

Docker is an open-source platform that automates the deployment, scaling, and management of applications within lightweight, portable containers. Containers include everything needed to run an application, including the code, runtime, libraries, and system tools.

## Installing Docker

### On Windows
1. Download Docker Desktop from the [official website](https://www.docker.com/products/docker-desktop).
2. Run the installer and follow the instructions.
3. Once installed, start Docker Desktop.
4. Verify the installation by running `docker --version` in Command Prompt or PowerShell.

### On macOS
1. Download Docker Desktop from the [official website](https://www.docker.com/products/docker-desktop).
2. Open the downloaded `.dmg` file and drag Docker to the Applications folder.
3. Launch Docker from Applications.
4. Verify the installation by running `docker --version` in the terminal.

### On Linux
1. Update your existing package list:
```
sudo apt-get update
```

Install required packages:


```
sudo apt-get install \
    ca-certificates \
    curl \
    gnupg \
    lsb-release
```

Add Docker’s official GPG key:

```
curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo gpg --dearmor -o /usr/share/keyrings/docker-archive-keyring.gpg
```

Set up the stable repository:


```
echo \
"deb [arch=$(dpkg --print-architecture) signed-by=/usr/share/keyrings/docker-archive-keyring.gpg] https://download.docker.com/linux/ubuntu \
$(lsb_release -cs) stable" | sudo tee /etc/apt/sources.list.d/docker.list > /dev/null
```

### Install Docker Engine:

```
sudo apt-get update
sudo apt-get install docker-ce docker-ce-cli containerd.io
```

Verify the installation by running ```docker --version```

---

### Basic Docker Concepts

#### Images

Docker images are read-only templates used to create containers. They contain the code, runtime, libraries, environment variables, and configuration files.

---

#### Containers

Containers are instances of Docker images. They are isolated, portable, and can run on any Docker-supported system.

---

#### Dockerfile

A Dockerfile is a script containing instructions on how to build a Docker image.

---

#### Volumes

Volumes are used to persist data generated by and used by Docker containers.

---

#### Networks

Docker networks allow containers to communicate with each other, as well as with external systems.

---

### Working with Docker Images

#### Pulling Images

To download an image from Docker Hub:

```
docker pull <image-name>
```

---

Listing Images

To list all images on your system:

```
docker images
```
---

### Removing Images

To remove an image:

```
docker rmi <image-id>
```

---

### Working with Docker Containers

Running Containers

To run a container from an image:

```
docker run <image-name>
```

---


To run a container in detached mode:

```
docker run -d <image-name>
```

---


#### Stopping Containers

To stop a running container:

```
docker stop <container-id>
```


---


Removing Containers

#### To remove a stopped container:

```
docker rm <container-id>
```

---


#### Viewing Logs

To view the logs of a container:

```
docker logs <container-id>
```

---


## Dockerfile: Building Your Own Images

### Basic Structure

- A Dockerfile typically consists of the following instructions:

```
    FROM: Specifies the base image.
    RUN: Executes a command during the build process.
    COPY or ADD: Copies files from the host machine to the container.
    CMD or ENTRYPOINT: Specifies the command to run when the container starts.
```


---

### Creating a Dockerfile

Here is an example Dockerfile:


```
# Use an official Python runtime as a parent image
FROM python:3.8-slim

# Set the working directory in the container
WORKDIR /app

# Copy the current directory contents into the container at /app
COPY . /app

# Install any needed packages specified in requirements.txt
RUN pip install --no-cache-dir -r requirements.txt

# Make port 80 available to the world outside this container
EXPOSE 80

# Define environment variable
ENV NAME World

# Run app.py when the container launches
CMD ["python", "app.py"]

```


---



### Building an Image

To build an image from a Dockerfile:

```
docker build -t <image-name> .
```

---


### Docker Volumes: Managing Data
#### Creating Volumes

To create a volume:

```
docker volume create <volume-name>
```

---


#### Mounting Volumes

To mount a volume to a container:

```
docker run -d -v <volume-name>:/path/in/container <image-name>
```

---


### Inspecting Volumes

#### To inspect a volume:

```
docker volume inspect <volume-name>
```

### Docker Networks: Managing Connectivity
#### Default Networks

Docker automatically creates three networks on installation:

```
    bridge: The default network for containers.
    none: For containers with no network.
    host: For containers that use the host's network stack.
```

---


### Creating a Network

#### To create a custom network:

```
docker network create <network-name>
```

### Connecting Containers to a Network

To connect a running container to a network:

```
docker network connect <network-name> <container-id>
```

---


### Docker Compose: Multi-Container Applications

#### Installing Docker Compose

Docker Compose is included with Docker Desktop. On Linux, install it separately:

```
sudo apt install docker-compose
```

docker-compose.yml Basics

A docker-compose.yml file defines a multi-container Docker application. Here’s an example:

```
version: '3'
services:
  web:
    image: nginx
    ports:
      - "80:80"
  redis:
    image: "redis:alpine"
```

Running a Multi-Container Application

To run the application defined in docker-compose.yml:

```
docker-compose up
```
